{"meta":{"title":"任博恩blog","subtitle":"逆流而上的鱼儿","description":"个人博客","author":"rbn","url":"https://renboen.github.io","root":"/"},"pages":[{"title":"page","date":"2019-04-01T03:17:40.000Z","updated":"2019-04-01T03:18:12.031Z","comments":true,"path":"page/index.html","permalink":"https://renboen.github.io/page/index.html","excerpt":"","text":""},{"title":"categories","date":"2019-03-30T10:01:02.000Z","updated":"2019-03-30T10:40:00.685Z","comments":true,"path":"categories/index.html","permalink":"https://renboen.github.io/categories/index.html","excerpt":"","text":""},{"title":"","date":"2019-04-15T09:37:23.044Z","updated":"2019-04-15T09:37:23.044Z","comments":true,"path":"page/lazyloadimage.html","permalink":"https://renboen.github.io/page/lazyloadimage.html","excerpt":"","text":"lazy * { margin: 0; padding: 0; } #scrollWrap { width: 100%; } .imgWrap { display: flex; align-items: center; width: 100%; padding: 8px; box-sizing: border-box; border: 1px solid #ccc; height: 400px; } img { width: 100%; } let throttle = function(fn, dely = 1000) { let preDate = 0; let timer; return function() { clearTimeout(timer) let content = this; let arg = arguments; let curDate = Date.now(); if (curDate - preDate > dely) { fn.apply(content, arg); preDate = curDate } else { timer = setTimeout(() => { fn.apply(content, arg) }, dely); } } } let r = throttle(function() { console.log(this); }) onload = function() { //滚动节流 let raf = function(fn) { console.log(this); if (\"requestAnimationFrame\" in window) { console.log(\"00\"); return function() { let content = this; let arg = arguments; console.log(arg) window.requestAnimationFrame(() => { fn.apply(content, arg) }) } } else { let r = throttle(fn); return r } }; // document.getElementById(\"scrollWrap\").onclick = raf(function() { // console.log(this) // }) let pageWidth = Math.max(window.pageYOffset, document.documentElement.clientHeight); let hander = raf(function() { console.log(\"object\"); let elements = document.querySelectorAll(\"img:not([src])\"); if (!elements.length) return; let scrollTop = Math.max(document.body.scrollTop, document.documentElement .scrollTop, document.scrollingElement.scrollTop); for (let ele of Array.from(elements)) { if (ele.parentNode.offsetTop < scrollTop + pageWidth) { ele.src = ele.getAttribute( \"data-src\") } else { continue } } }); hander() this.addEventListener(\"scroll\", hander, false); } // onload = function() { // let lazyElements = document.getElementsByClassName(\"imgWrap\"); // let observer = new IntersectionObserver(onIntersection, { // rootMargin: '50px 0px', // threshold: 0.01 // }); // Array.from(lazyElements).forEach(image => { // observer.observe(image); // }); // function onIntersection(entries) { // console.log(entries); // entries.forEach(entry => { // if (entry.intersectionRatio > 0) { // observer.unobserve(entry.target); // entry.target.querySelector(\"img\").src = entry.target.querySelector(\"img\").getAttribute( // \"data-src\") // } // }); // } // }"}],"posts":[{"title":"","slug":"lazyloadimage","date":"2019-04-15T09:28:38.023Z","updated":"2019-04-15T09:28:38.023Z","comments":true,"path":"2019/04/15/lazyloadimage/","link":"","permalink":"https://renboen.github.io/2019/04/15/lazyloadimage/","excerpt":"","text":"lazy * { margin: 0; padding: 0; } #scrollWrap { width: 100%; } .imgWrap { display: flex; align-items: center; width: 100%; padding: 8px; box-sizing: border-box; border: 1px solid #ccc; height: 400px; } img { width: 100%; } let throttle = function(fn, dely = 1000) { let preDate = 0; let timer; return function() { clearTimeout(timer) let content = this; let arg = arguments; let curDate = Date.now(); if (curDate - preDate > dely) { fn.apply(content, arg); preDate = curDate } else { timer = setTimeout(() => { fn.apply(content, arg) }, dely); } } } let r = throttle(function() { console.log(this); }) onload = function() { //滚动节流 let raf = function(fn) { console.log(this); if (\"requestAnimationFrame\" in window) { console.log(\"00\"); return function() { let content = this; let arg = arguments; console.log(arg) window.requestAnimationFrame(() => { fn.apply(content, arg) }) } } else { let r = throttle(fn); return r } }; // document.getElementById(\"scrollWrap\").onclick = raf(function() { // console.log(this) // }) let pageWidth = Math.max(window.pageYOffset, document.documentElement.clientHeight); let hander = raf(function() { console.log(\"object\"); let elements = document.querySelectorAll(\"img:not([src])\"); if (!elements.length) return; let scrollTop = Math.max(document.body.scrollTop, document.documentElement .scrollTop, document.scrollingElement.scrollTop); for (let ele of Array.from(elements)) { if (ele.parentNode.offsetTop < scrollTop + pageWidth) { ele.src = ele.getAttribute( \"data-src\") } else { continue } } }); hander() this.addEventListener(\"scroll\", hander, false); } // onload = function() { // let lazyElements = document.getElementsByClassName(\"imgWrap\"); // let observer = new IntersectionObserver(onIntersection, { // rootMargin: '50px 0px', // threshold: 0.01 // }); // Array.from(lazyElements).forEach(image => { // observer.observe(image); // }); // function onIntersection(entries) { // console.log(entries); // entries.forEach(entry => { // if (entry.intersectionRatio > 0) { // observer.unobserve(entry.target); // entry.target.querySelector(\"img\").src = entry.target.querySelector(\"img\").getAttribute( // \"data-src\") // } // }); // } // }","categories":[],"tags":[]},{"title":"catcherr","slug":"catcherr","date":"2019-04-02T03:15:30.000Z","updated":"2019-04-02T03:26:24.935Z","comments":true,"path":"2019/04/02/catcherr/","link":"","permalink":"https://renboen.github.io/2019/04/02/catcherr/","excerpt":"前端请求过程中对接口错误进行捕获处理。","text":"前端请求过程中对接口错误进行捕获处理。 需求","categories":[{"name":"web","slug":"web","permalink":"https://renboen.github.io/categories/web/"},{"name":"axios","slug":"web/axios","permalink":"https://renboen.github.io/categories/web/axios/"}],"tags":[{"name":"错误捕获处理","slug":"错误捕获处理","permalink":"https://renboen.github.io/tags/错误捕获处理/"}]},{"title":"test","slug":"test-1","date":"2019-04-02T03:14:35.000Z","updated":"2019-04-02T03:14:35.503Z","comments":true,"path":"2019/04/02/test-1/","link":"","permalink":"https://renboen.github.io/2019/04/02/test-1/","excerpt":"","text":"","categories":[],"tags":[]},{"title":"test","slug":"test.4","date":"2019-03-30T09:30:35.000Z","updated":"2019-03-30T09:52:48.386Z","comments":true,"path":"2019/03/30/test.4/","link":"","permalink":"https://renboen.github.io/2019/03/30/test.4/","excerpt":"随笔这是摘要","text":"随笔这是摘要 这是正文","categories":[],"tags":[{"name":"node","slug":"node","permalink":"https://renboen.github.io/tags/node/"}]},{"title":"test","slug":"test.11","date":"2019-03-30T09:30:35.000Z","updated":"2019-03-30T09:38:39.882Z","comments":true,"path":"2019/03/30/test.11/","link":"","permalink":"https://renboen.github.io/2019/03/30/test.11/","excerpt":"随笔这是摘要","text":"随笔这是摘要 这是正文","categories":[],"tags":[{"name":"随笔","slug":"随笔","permalink":"https://renboen.github.io/tags/随笔/"}]},{"title":"test","slug":"test.12","date":"2019-03-30T09:30:35.000Z","updated":"2019-03-30T09:38:40.168Z","comments":true,"path":"2019/03/30/test.12/","link":"","permalink":"https://renboen.github.io/2019/03/30/test.12/","excerpt":"随笔这是摘要","text":"随笔这是摘要 这是正文","categories":[],"tags":[{"name":"随笔","slug":"随笔","permalink":"https://renboen.github.io/tags/随笔/"}]},{"title":"test","slug":"test.14","date":"2019-03-30T09:30:35.000Z","updated":"2019-03-30T09:38:40.668Z","comments":true,"path":"2019/03/30/test.14/","link":"","permalink":"https://renboen.github.io/2019/03/30/test.14/","excerpt":"随笔这是摘要","text":"随笔这是摘要 这是正文","categories":[],"tags":[{"name":"随笔","slug":"随笔","permalink":"https://renboen.github.io/tags/随笔/"}]},{"title":"test","slug":"test.15","date":"2019-03-30T09:30:35.000Z","updated":"2019-03-30T09:38:40.980Z","comments":true,"path":"2019/03/30/test.15/","link":"","permalink":"https://renboen.github.io/2019/03/30/test.15/","excerpt":"随笔这是摘要","text":"随笔这是摘要 这是正文","categories":[],"tags":[{"name":"随笔","slug":"随笔","permalink":"https://renboen.github.io/tags/随笔/"}]},{"title":"test","slug":"test.16","date":"2019-03-30T09:30:35.000Z","updated":"2019-03-30T09:38:44.455Z","comments":true,"path":"2019/03/30/test.16/","link":"","permalink":"https://renboen.github.io/2019/03/30/test.16/","excerpt":"随笔这是摘要","text":"随笔这是摘要 这是正文","categories":[],"tags":[{"name":"随笔","slug":"随笔","permalink":"https://renboen.github.io/tags/随笔/"}]},{"title":"test","slug":"test.13","date":"2019-03-30T09:30:35.000Z","updated":"2019-03-30T09:38:40.447Z","comments":true,"path":"2019/03/30/test.13/","link":"","permalink":"https://renboen.github.io/2019/03/30/test.13/","excerpt":"随笔这是摘要","text":"随笔这是摘要 这是正文","categories":[],"tags":[{"name":"随笔","slug":"随笔","permalink":"https://renboen.github.io/tags/随笔/"}]},{"title":"test","slug":"test.2","date":"2019-03-30T09:30:35.000Z","updated":"2019-03-30T09:38:37.262Z","comments":true,"path":"2019/03/30/test.2/","link":"","permalink":"https://renboen.github.io/2019/03/30/test.2/","excerpt":"随笔这是摘要","text":"随笔这是摘要 这是正文","categories":[],"tags":[{"name":"随笔","slug":"随笔","permalink":"https://renboen.github.io/tags/随笔/"}]},{"title":"test","slug":"test.10","date":"2019-03-30T09:30:35.000Z","updated":"2019-03-30T09:38:39.637Z","comments":true,"path":"2019/03/30/test.10/","link":"","permalink":"https://renboen.github.io/2019/03/30/test.10/","excerpt":"随笔这是摘要","text":"随笔这是摘要 这是正文","categories":[],"tags":[{"name":"随笔","slug":"随笔","permalink":"https://renboen.github.io/tags/随笔/"}]},{"title":"test","slug":"test.5","date":"2019-03-30T09:30:35.000Z","updated":"2019-03-30T09:38:38.186Z","comments":true,"path":"2019/03/30/test.5/","link":"","permalink":"https://renboen.github.io/2019/03/30/test.5/","excerpt":"随笔这是摘要","text":"随笔这是摘要 这是正文","categories":[],"tags":[{"name":"随笔","slug":"随笔","permalink":"https://renboen.github.io/tags/随笔/"}]},{"title":"test","slug":"test.7","date":"2019-03-30T09:30:35.000Z","updated":"2019-03-30T09:38:38.773Z","comments":true,"path":"2019/03/30/test.7/","link":"","permalink":"https://renboen.github.io/2019/03/30/test.7/","excerpt":"随笔这是摘要","text":"随笔这是摘要 这是正文","categories":[],"tags":[{"name":"随笔","slug":"随笔","permalink":"https://renboen.github.io/tags/随笔/"}]},{"title":"test","slug":"test.6","date":"2019-03-30T09:30:35.000Z","updated":"2019-03-30T09:38:38.497Z","comments":true,"path":"2019/03/30/test.6/","link":"","permalink":"https://renboen.github.io/2019/03/30/test.6/","excerpt":"随笔这是摘要","text":"随笔这是摘要 这是正文","categories":[],"tags":[{"name":"随笔","slug":"随笔","permalink":"https://renboen.github.io/tags/随笔/"}]},{"title":"test","slug":"test.3","date":"2019-03-30T09:30:35.000Z","updated":"2019-03-30T09:38:37.485Z","comments":true,"path":"2019/03/30/test.3/","link":"","permalink":"https://renboen.github.io/2019/03/30/test.3/","excerpt":"随笔这是摘要","text":"随笔这是摘要 这是正文","categories":[],"tags":[{"name":"随笔","slug":"随笔","permalink":"https://renboen.github.io/tags/随笔/"}]},{"title":"test","slug":"test.8","date":"2019-03-30T09:30:35.000Z","updated":"2019-03-30T09:38:39.155Z","comments":true,"path":"2019/03/30/test.8/","link":"","permalink":"https://renboen.github.io/2019/03/30/test.8/","excerpt":"随笔这是摘要","text":"随笔这是摘要 这是正文","categories":[],"tags":[{"name":"随笔","slug":"随笔","permalink":"https://renboen.github.io/tags/随笔/"}]},{"title":"test","slug":"test.9","date":"2019-03-30T09:30:35.000Z","updated":"2019-03-30T09:38:39.382Z","comments":true,"path":"2019/03/30/test.9/","link":"","permalink":"https://renboen.github.io/2019/03/30/test.9/","excerpt":"随笔这是摘要","text":"随笔这是摘要 这是正文","categories":[],"tags":[{"name":"随笔","slug":"随笔","permalink":"https://renboen.github.io/tags/随笔/"}]},{"title":"test","slug":"test","date":"2019-03-30T09:30:35.000Z","updated":"2019-03-30T09:36:50.637Z","comments":true,"path":"2019/03/30/test/","link":"","permalink":"https://renboen.github.io/2019/03/30/test/","excerpt":"随笔这是摘要","text":"随笔这是摘要 这是正文","categories":[],"tags":[{"name":"随笔","slug":"随笔","permalink":"https://renboen.github.io/tags/随笔/"}]},{"title":"test","slug":"test.1","date":"2019-03-30T09:30:35.000Z","updated":"2019-04-15T09:28:15.703Z","comments":true,"path":"2019/03/30/test.1/","link":"","permalink":"https://renboen.github.io/2019/03/30/test.1/","excerpt":"利用观察者实现简单的图片懒加载；图片懒加载的原生实现。图片懒加载的实现原理，一般都是监听滚动事件，根据可滚动元素的滚动高度scrollTop，与懒加载的元素的offsetTop进行比较，当scrollTop&gt;offsetTop+可视高度(如果可滚动元素是body,可视高度为document.body.clentHeight)时;惊醒相应的逻辑操作；12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061let throttle = function(fn, dely = 1000) &#123; let preDate = 0; let timer; return function() &#123; clearTimeout(timer) let content = this; let arg = arguments; let curDate = Date.now(); if (curDate - preDate &gt; dely) &#123; fn.apply(content, arg); preDate = curDate &#125; else &#123; timer = setTimeout(() =&gt; &#123; fn.apply(content, arg) &#125;, dely); &#125; &#125; &#125; let r = throttle(function() &#123; console.log(this); &#125;) onload = function() &#123; //滚动节流 let raf = function(fn) &#123; console.log(this); if (\"requestAnimationFrame\" in window) &#123; console.log(\"00\"); return function() &#123; let content = this; let arg = arguments; console.log(arg) window.requestAnimationFrame(() =&gt; &#123; fn.apply(content, arg) &#125;) &#125; &#125; else &#123; let r = throttle(fn); return r &#125; &#125;; let pageWidth = Math.max(window.pageYOffset, document.documentElement.clientHeight,document.documentElement.clientHeight); let hander = raf(function() &#123; console.log(\"object\"); let elements = document.querySelectorAll(\"img:not([src])\"); if (!elements.length) return; let scrollTop = Math.max(document.body.scrollTop, document.documentElement .scrollTop, document.scrollingElement.scrollTop); for (let ele of Array.from(elements)) &#123; if (ele.parentNode.offsetTop &lt; scrollTop + pageWidth) &#123; ele.src = ele.getAttribute( \"data-src\") &#125; else &#123; continue &#125; &#125; &#125;); hander() this.addEventListener(\"scroll\", hander, false); &#125; 参考链接： 浏览器中的观察者 scrollTop兼容性","text":"利用观察者实现简单的图片懒加载；图片懒加载的原生实现。图片懒加载的实现原理，一般都是监听滚动事件，根据可滚动元素的滚动高度scrollTop，与懒加载的元素的offsetTop进行比较，当scrollTop&gt;offsetTop+可视高度(如果可滚动元素是body,可视高度为document.body.clentHeight)时;惊醒相应的逻辑操作；12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061let throttle = function(fn, dely = 1000) &#123; let preDate = 0; let timer; return function() &#123; clearTimeout(timer) let content = this; let arg = arguments; let curDate = Date.now(); if (curDate - preDate &gt; dely) &#123; fn.apply(content, arg); preDate = curDate &#125; else &#123; timer = setTimeout(() =&gt; &#123; fn.apply(content, arg) &#125;, dely); &#125; &#125; &#125; let r = throttle(function() &#123; console.log(this); &#125;) onload = function() &#123; //滚动节流 let raf = function(fn) &#123; console.log(this); if (\"requestAnimationFrame\" in window) &#123; console.log(\"00\"); return function() &#123; let content = this; let arg = arguments; console.log(arg) window.requestAnimationFrame(() =&gt; &#123; fn.apply(content, arg) &#125;) &#125; &#125; else &#123; let r = throttle(fn); return r &#125; &#125;; let pageWidth = Math.max(window.pageYOffset, document.documentElement.clientHeight,document.documentElement.clientHeight); let hander = raf(function() &#123; console.log(\"object\"); let elements = document.querySelectorAll(\"img:not([src])\"); if (!elements.length) return; let scrollTop = Math.max(document.body.scrollTop, document.documentElement .scrollTop, document.scrollingElement.scrollTop); for (let ele of Array.from(elements)) &#123; if (ele.parentNode.offsetTop &lt; scrollTop + pageWidth) &#123; ele.src = ele.getAttribute( \"data-src\") &#125; else &#123; continue &#125; &#125; &#125;); hander() this.addEventListener(\"scroll\", hander, false); &#125; 参考链接： 浏览器中的观察者 scrollTop兼容性 这是正文","categories":[{"name":"js","slug":"js","permalink":"https://renboen.github.io/categories/js/"}],"tags":[{"name":"IntersectionObserver","slug":"IntersectionObserver","permalink":"https://renboen.github.io/tags/IntersectionObserver/"}]},{"title":"Hello World","slug":"hello-world","date":"2019-03-30T08:46:10.798Z","updated":"2019-04-02T03:17:57.890Z","comments":true,"path":"2019/03/30/hello-world/","link":"","permalink":"https://renboen.github.io/2019/03/30/hello-world/","excerpt":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[{"name":"web","slug":"web","permalink":"https://renboen.github.io/categories/web/"},{"name":"framework","slug":"web/framework","permalink":"https://renboen.github.io/categories/web/framework/"}],"tags":[{"name":"随笔","slug":"随笔","permalink":"https://renboen.github.io/tags/随笔/"}]}]}